<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playwrite+CL:wght@100..400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">
  <title>Ease - Chatroom</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap');

    
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;
    }

    .chat-container {
      max-width: 800px;
      margin: 110px auto;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      height: 600px;
    }

    .chat-header {
      background-color: #007bff;
      color: #fff;
      padding: 15px;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
      text-align: center;
      font-family: 'Montserrat', sans-serif;
      font-size: 24px;
      font-weight: 600;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .chat-header img {
      height: 30px;
      margin-right: 10px;
      border-radius: 50%;
    }

    .chat-messages {
      flex-grow: 1;
      padding: 20px;
      overflow-y: scroll;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    .chat-message {
      background-color: #e6e6e6;
      padding: 10px 15px;
      border-radius: 20px;
      margin-bottom: 10px;
      max-width: 70%;
      display: inline-block;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      position: relative;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
    }

    .chat-message.user {
      background-color: #007bff;
      color: #fff;
      align-self: flex-end;
    }

    .chat-message .username {
      font-weight: bold;
      font-size: 14px;
      margin-bottom: 5px;
      color: #333;
    }

    .chat-message.user .username {
      color: #fff;
    }

    .chat-message .timestamp {
      font-size: 12px;
      color: #999;
      margin-top: 5px;
    }

    .chat-message img,
    .chat-message a,
    .chat-message video {
      max-width: 100%;
      height: auto;
      display: block;
      margin-top: 10px;
    }

    .chat-input {
      display: flex;
      padding: 10px;
      border-top: 1px solid #e6e6e6;
    }

    .chat-input input {
      flex-grow: 1;
      border: none;
      outline: none;
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 20px;
      background-color: #f5f5f5;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      font-family: 'Poppins', sans-serif;
    }

    .chat-input button {
      margin-left: 10px;
      background-color: #007bff;
      color: #fff;
      border: none;
      outline: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 20px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      font-family: 'Poppins', sans-serif;
    }

    .chat-input label {
      margin-left: 10px;
      background-color: #007bff;
      color: #fff;
      border: none;
      outline: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 20px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      font-family: 'Poppins', sans-serif;
    }

    .chat-input input[type="file"] {
      display: none;
    }

    .user-profile {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .user-profile img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .user-profile .username {
      font-weight: bold;
      font-size: 16px;
    }

    .user-profile .status {
      font-size: 12px;
      color: #999;
      margin-left: 5px;
    }

    .read-receipt {
      font-size: 12px;
      color: #999;
      margin-top: 5px;
      text-align: right;
    }

    .typing-indicator {
      font-size: 12px;
      color: #999;
      margin-top: 5px;
      text-align: right;
    }

    @media (max-width: 767px) {
      .chat-container {
        margin: 0;
        border-radius: 0;
        height: 100vh;
      }

      .chat-messages {
        padding: 10px;
      }

      .chat-message {
        max-width: 80%;
      }

      .chat-input {
        flex-direction: column;
        align-items: center;
      }

      .chat-input input {
        width: 100%;
        margin-bottom: 10px;
      }

      .chat-input button,
      .chat-input label {
        width: 100%;
        margin-left: 0;
      }
    }
  </style>
</head>
<body id="top">
    <header class="header" data-header>
        <div class="container">
    
          <a href="#" class="logo">!Ease</a>
    
          <nav class="navbar" data-navbar>
    
            <div class="wrapper">
              <a href="#" class="logo">Ease</a>
    
              <button class="nav-close-btn" aria-label="close menu" data-nav-toggler>
                <ion-icon name="close-outline" aria-hidden="true"></ion-icon>
              </button>
            </div>
    
            <ul class="navbar-list">
    
              <li class="navbar-item">
                <a href="/index.html" class="navbar-link" data-nav-link>HOME</a>
              </li>
    
              <li class="navbar-item">
                <a href="assets/htmls pageess/projects.html" class="navbar-link" data-nav-link>PROJECTS</a>
              </li>
    
              <li class="navbar-item">
                <a href="#" class="navbar-link" data-nav-link>AI/CREATE PROJECTS</a>
              </li>
    
              <li class="navbar-item">
                <a href="#" class="navbar-link" data-nav-link>ABOUT US</a>
              </li>
    
              <li class="navbar-item">
                <a href="#" class="navbar-link" data-nav-link>CONTACT US</a>
              </li>
    
            </ul>
    
          </nav>
    
          <button class="nav-open-btn" aria-label="open menu" data-nav-toggler>
            <ion-icon name="menu-outline" aria-hidden="true"></ion-icon>
          </button>
    
          <a href="#" class="btn btn-primary has-before has-after">Letâ€™s Talk ðŸ‘‹</a>
    
          <div class="overlay" data-nav-toggler data-overlay></div>
    
        </div>
      </header>
    <section class="section-hero">
  <div class="chat-container">
    <div class="chat-header">
      
      Chatroom
    </div>
    <div class="chat-messages" id="chat-messages">
      <div class="user-profile">
        <img src="https://via.placeholder.com/40x40" alt="John Doe">
        <div class="username">Vision</div>
        <div class="status">Online</div>
      </div>
      <div class="chat-message user">
        <div class="username">John Doe</div>
        <div class="timestamp">10:30 AM</div>
        Hello, everyone! How's it going?
        <div class="read-receipt">Read by Jane, Michael</div>
      </div>
      <div class="chat-message">
        <div class="username">Jane Smith</div>
        <div class="timestamp">10:31 AM</div>
        Hi there! I'm doing great, thanks for asking.
        <div class="read-receipt">Read by John, Michael</div>
      </div>
      <div class="chat-message">
        <div class="username">Michael Johnson</div>
        <div class="timestamp">10:33 AM</div>
        I'm planning to go hiking, it should be fun! You're welcome to join if you'd like.
        <div class="read-receipt">Read by John, Jane</div>
      </div>
      <div class="chat-message user">
        <div class="username">John Doe</div>
        <div class="timestamp">10:34 AM</div>
        That sounds like a great idea! I'd love to join if the offer still stands.
        <div class="read-receipt">Read by Michael</div>
      </div>
      <div class="chat-message">
        <div class="username">Michael Johnson</div>
        <div class="timestamp">10:35 AM</div>
        Absolutely, the more the merrier! Let's plan the details later.
        <div class="read-receipt">Read by John</div>
      </div>
      <div class="chat-message user">
        <div class="username">John Doe</div>
        <div class="timestamp">10:36 AM</div>
        Great! I'll send you a picture of the hiking trail I found.
        <img src="https://via.placeholder.com/300x200" alt="Hiking Trail">
        <div class="read-receipt">Read by Michael</div>
      </div>
      <div class="chat-message">
        <div class="username">Michael Johnson</div>
        <div class="timestamp">10:37 AM</div>
        Awesome, that looks like a beautiful spot! I'll upload the map of the trail later.
        <a href="#" download>Trail Map.pdf</a>
        <div class="read-receipt">Read by John</div>
      </div>
      <div class="typing-indicator">John Doe is typing...</div>
    </div>
    <div class="chat-input">
      <input type="text" id="chat-input" placeholder="Type your message..." />
      <button id="send-button">Send</button>
      <label for="file-input">
        <i class="fas fa-paperclip"></i> Upload
      </label>
      <input type="file" id="file-input" accept="image/*,application/pdf,video/*" />
    </div>
  </div>
</section>

  <script>
    const chatMessages = document.getElementById('chat-messages');
    const chatInput = document.getElementById('chat-input');
    const sendButton = document.getElementById('send-button');
    const fileInput = document.getElementById('file-input');

    // WebSocket connection
    const socket = new WebSocket('ws://localhost:8080/chat');

    socket.onopen = () => {
      console.log('WebSocket connection established');
    };

    socket.onmessage = (event) => {
      const message = JSON.parse(event.data);
      addChatMessage(message.username, message.content, message.timestamp, message.readBy);
      updateTypingIndicator(message.username, false);
    };

    chatInput.addEventListener('keypress', (event) => {
      if (event.key === 'Enter') {
        sendMessage();
      } else {
        updateTypingIndicator('John Doe', true);
      }
    });

    sendButton.addEventListener('click', sendMessage);
    fileInput.addEventListener('change', handleFileUpload);

    function sendMessage() {
      const message = chatInput.value.trim();
      if (message) {
        const messageData = {
          username: 'John Doe',
          content: message,
          timestamp: new Date().toLocaleTimeString(),
          readBy: ['Jane', 'Michael']
        };
        socket.send(JSON.stringify(messageData));
        addChatMessage(messageData.username, messageData.content, messageData.timestamp, messageData.readBy);
        updateTypingIndicator('John Doe', false);
        chatInput.value = '';
      }
    }

    function handleFileUpload() {
      const file = fileInput.files[0];
      if (file) {
        const fileType = file.type.split('/')[0];
        if (fileType === 'image') {
          addChatMessage('John Doe', `<img src="${URL.createObjectURL(file)}" alt="${file.name}">`, new Date().toLocaleTimeString(), ['Jane', 'Michael']);
        } else if (fileType === 'application') {
          addChatMessage('John Doe', `<a href="${URL.createObjectURL(file)}" download="${file.name}">${file.name}</a>`, new Date().toLocaleTimeString(), ['Jane', 'Michael']);
        } else if (fileType === 'video') {
          addChatMessage('John Doe', `<video src="${URL.createObjectURL(file)}" controls></video>`, new Date().toLocaleTimeString(), ['Jane', 'Michael']);
        }
        fileInput.value = '';
        // Here you can add logic to upload the file to a server
        uploadFileToServer(file);
      }
    }

    function addChatMessage(username, message, timestamp, readBy) {
      const chatMessage = document.createElement('div');
      chatMessage.classList.add('chat-message', 'user');
      chatMessage.innerHTML = `
        <div class="username">${username}</div>
        <div class="timestamp">${timestamp}</div>
        ${message}
        <div class="read-receipt">Read by ${readBy.join(', ')}</div>
      `;
      chatMessages.appendChild(chatMessage);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function updateTypingIndicator(username, isTyping) {
      const typingIndicator = document.querySelector('.typing-indicator');
      if (isTyping) {
        typingIndicator.textContent = `${username} is typing...`;
      } else {
        typingIndicator.textContent = '';
      }
    }

    function uploadFileToServer(file) {
      // Add your logic to upload the file to a backend server
      console.log('Uploading file to server:', file.name);
    }
  </script>
</body>
</html>